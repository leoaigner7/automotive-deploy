services:
  backend:
    build: ../../backend
    image: backend:latest
    container_name: backend
    ports:
      - "8088:8088"
    volumes:
      - ../scripts:/ops/scripts
      - ../compose:/ops/compose
      - ../state:/ops/state
      - ../../:/workspace        # âœ… komplette Repo-Wurzel in Container 
      - /var/run/docker.sock:/var/run/docker.sock

  frontend:
    build: ../../frontend
    image: frontend:latest
    container_name: frontend
    ports:
      - "5174:80"

  hello-service:
    build:
      context: /workspace/hello-service
      dockerfile: Dockerfile
    image: hello-service:${VERSION:-local}
    container_name: hello-service
    ports:
      - "9090:9090"
    environment:
      VERSION: ${VERSION}
    volumes:
      - ../../state:/ops/state
    pull_policy: never
